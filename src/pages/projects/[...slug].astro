---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects', ({ data }) => {
    return data.draft !== true;
  });
  return projects.map(project => ({
    params: { slug: project.slug },
    props: project,
  }));
}

const project = Astro.props;
const { Content } = await project.render();
---

<BaseLayout title={project.data.title} description={project.data.description}>
  <article>
    <header style="margin-bottom: 2rem;">
      <h1>{project.data.title}</h1>
      {project.data.description && (
        <p style="color: var(--color-text-light); margin-top: 0.5rem; font-size: 1.1rem;">
          {project.data.description}
        </p>
      )}
    </header>
    <div class="content">
      <Content />
    </div>
  </article>
  <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--color-border);">
    <a href="/projects">&larr; Back to projects</a>
  </div>
</BaseLayout>
