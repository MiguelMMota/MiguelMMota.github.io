---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 5);
---

<BaseLayout title="">
  <style>
    .industrial-hero {
      position: relative;
      padding: 3rem 0;
      border-left: 4px solid #4a4a4a;
      padding-left: 1.5rem;
      margin-bottom: 4rem;
    }

    @media (min-width: 768px) {
      .industrial-hero {
        padding: 4rem 0 5rem 2rem;
        margin-bottom: 5rem;
        border-left-width: 6px;
      }
    }

    .industrial-hero::before {
      content: '';
      position: absolute;
      left: -3px;
      top: 0;
      width: 2px;
      height: 100%;
      background: linear-gradient(180deg, #8a8a8a 0%, #4a4a4a 100%);
    }

    .industrial-hero h1 {
      font-family: var(--font-mono);
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -0.03em;
      text-transform: uppercase;
      margin: 0;
      line-height: 1.1;
    }

    @media (min-width: 768px) {
      .industrial-hero h1 {
        font-size: 4rem;
      }
    }

    .industrial-hero .subtitle {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      color: #888;
      margin-top: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-weight: 500;
    }

    @media (min-width: 768px) {
      .industrial-hero .subtitle {
        font-size: 1rem;
        margin-top: 1rem;
      }
    }

    .section-header {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: #666;
      margin: 3rem 0 1.5rem 0;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #e0e0e0;
      font-weight: 600;
    }

    @media (min-width: 768px) {
      .section-header {
        font-size: 0.85rem;
        margin: 4rem 0 2rem 0;
        padding-bottom: 0.75rem;
      }
    }

    @media (prefers-color-scheme: dark) {
      .section-header {
        color: #999;
        border-bottom-color: #404040;
      }
    }

    .post-grid {
      display: grid;
      gap: 0;
      list-style: none;
      padding: 0;
      margin: 0;
    }

    @media (min-width: 1024px) {
      .post-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 3rem 4rem;
      }
    }

    .post-item {
      padding: 1.25rem 0;
      border-bottom: 1px solid #e5e5e5;
      position: relative;
    }

    @media (min-width: 1024px) {
      .post-item {
        padding: 1.5rem 0;
      }
    }

    @media (prefers-color-scheme: dark) {
      .post-item {
        border-bottom-color: #333;
      }
    }

    .post-item:hover {
      background: linear-gradient(90deg, transparent 0%, rgba(128, 128, 128, 0.03) 100%);
    }

    @media (prefers-color-scheme: dark) {
      .post-item:hover {
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.02) 100%);
      }
    }

    .post-item::before {
      content: '//';
      position: absolute;
      left: -1.5rem;
      top: 1.25rem;
      font-family: var(--font-mono);
      color: #ccc;
      font-size: 0.85rem;
    }

    @media (prefers-color-scheme: dark) {
      .post-item::before {
        color: #555;
      }
    }

    .post-title {
      font-family: var(--font-mono);
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      display: block;
      color: var(--color-text);
    }

    .post-title:hover {
      color: var(--color-link);
      text-decoration: none;
    }

    .post-date {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: #888;
      margin-top: 0.35rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .post-description {
      margin-top: 0.5rem;
      color: var(--color-text-light);
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .cta-link {
      font-family: var(--font-mono);
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      font-weight: 600;
      margin-top: 2rem;
      display: inline-block;
      padding: 0.75rem 0;
      border-top: 2px solid currentColor;
      color: var(--color-text);
    }

    @media (min-width: 1024px) {
      .cta-link {
        margin-top: 3rem;
        font-size: 0.9rem;
      }
    }

    .cta-link:hover {
      color: var(--color-link);
      text-decoration: none;
    }

    .greeting-text {
      margin-bottom: 4rem;
      padding: 0;
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--color-text-light);
    }

    @media (min-width: 768px) {
      .greeting-text {
        margin-bottom: 5rem;
        font-size: 1.2rem;
        max-width: 75%;
      }
    }

    .greeting-text p {
      margin: 0.5rem 0;
    }

    .greeting-text p:first-of-type {
      margin-top: 0;
    }

    .greeting-text a {
      color: var(--color-text);
      text-decoration: none;
      border-bottom: 1px solid currentColor;
      transition: color 0.2s ease;
    }

    .greeting-text a:hover {
      color: var(--color-link);
      text-decoration: none;
    }
  </style>

  <section class="industrial-hero">
    <h1>Miguel Mota</h1>
    <p class="subtitle">Software Engineer / Python Enthusiast</p>
  </section>

  <section class="greeting-text">
    <p>
      Welcome to my page! You can learn more about me <a href="/about">here &rarr;</a>
    </p>
  </section>

  <section>
    <h2 class="section-header">Recent Posts</h2>
    <ul class="post-grid">
      {posts.map(post => (
        <li class="post-item">
          <a href={`/blog/${post.slug}`} class="post-title">
            {post.data.title}
          </a>
          <div class="post-date">
            {new Intl.DateTimeFormat('en-US', { year: 'numeric', month: 'short', day: 'numeric' }).format(post.data.date)}
          </div>
          {post.data.description && (
            <p class="post-description">
              {post.data.description}
            </p>
          )}
        </li>
      ))}
    </ul>
    <a href="/blog" class="cta-link">View All Posts &rarr;</a>
  </section>
</BaseLayout>
